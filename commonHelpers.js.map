{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\"use strict\";\n\nimport { getPhoto } from './pixabay-api';\nimport { form, imgGallery, gallery } from '../main';\n\nexport function symbolTemplate(objects) { \n    return objects\n        .map(object => `<li class = \"gallery-item\">\n         <a class=\"gallery-link\" href=\"${object.largeImageURL}\">\n         <img\n         loading=\"lazy\"\n         class = \"gallery-image\"\n         src=\"${object.webformatURL}\" \n         alt=\"${object.tags}\" \n         width=\"1280\"\n         height=\"152\"\">\n           <ul class=\"gallery-description\">\n             <li>\n             <h3>Likes</h3>\n             <p>${object.likes}</p>\n             </li>\n             <li>\n             <h3>Views</h3>\n             <p>${object.views}\n             </p>\n             </li>\n             <li>\n             <h3>Comments</h3>\n             <p>${object.comments}</p>\n             </li>\n             <li>\n             <h3>Downloads</h3>\n             <p>${object.downloads}</p>\n             </li>\n             </ul>       \n         </li>`)\n      .join(\"\");\n};\n\n","\"use strict\";\n\nimport { symbolTemplate } from './render-functions';\nimport { form, gallery, userSearch } from '../main';\nimport axios from 'axios';\n\nexport async function getPhoto(userSearch, currentPage) {\n    const url = \"https://pixabay.com/api/?key=\"; \n    const params = {\n        key: '43135550-1722255432324a30f15700264',\n        q: userSearch,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: 15,\n        page: currentPage,\n        \n    };\n    const res = await axios.get(url, { params });\n    return res.data;\n} \n\n  ","\"use strict\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getPhoto } from './js/pixabay-api'\nimport { symbolTemplate } from './js/render-functions';\n\n//* = = = = = = = = = = = = = = = = = = = =\n\nexport const form = document.querySelector('.search-form');\nexport const imgGallery = document.querySelector('.gallery');\nconst load = document.querySelector('.js-btn-load');\nconst loader = document.querySelector('.block');\nlet currentPage = 1;\nlet maxPage = 0;\nconst perPage = 15;\nexport let userSearch = ''; \nexport let gallery = new SimpleLightbox('.gallery a');\n\ngallery.on('show.simplelightbox', function () {\n\t// do somethingâ€¦\n});\n\ngallery.on('error.simplelightbox', function (e) {\n\tconsole.log(e); // some usefull information\n});\n\n//* = = = = = = = = = = = = = = = = = = = =\n\nload.addEventListener('click', onLoadMoreClick);\n\nform.addEventListener(\"submit\", async e => {\n    e.preventDefault();\n\n    showLoader();\n    userSearch = form.elements.query.value.trim();\n    imgGallery.innerHTML = \"\";\n    currentPage = 1;\n \n    if (!userSearch) {\n         iziToast.error({\n        color: 'red',\n        position: 'topRight',\n        message: `Fill in the input!`,\n         });\n        hideLoader();\n        hideLoadMore(); \n    } else {\n        try {\n            const data = await getPhoto(userSearch, currentPage)\n            if (data.total !== 0) {\n                maxPage = Math.ceil(data.totalHits / perPage); \n                renderArticles(data.hits);\n                hideLoader();\n                gallery.refresh();\n                e.target.reset();\n                checkBtnStstus(); \n            } else {\n                 iziToast.error({\n                    color: 'red',\n                    position: 'topRight',\n                    message: `\"Sorry, there are no images matching your search query. Please try again!\"`,\n                });\n                e.target.reset();\n                hideLoader();\n                hideLoadMore(); \n            }\n        } catch (error) {\n            iziToast.error({\n                maxWidth: '432px',\n                height: '48px',\n                color: 'red',\n                position: 'topRight',\n                message: \"Sorry, a technical error has occurred!\",\n            });\n            hideLoader();\n        }\n    }\n    \n});\n\nfunction renderArticles(arr) {\n    const markup = symbolTemplate(arr);\n    imgGallery.insertAdjacentHTML(\"beforeend\", markup);\n}\n\n\nasync function onLoadMoreClick() {\n    showLoader();\n    currentPage += 1;\n    const data = await getPhoto(userSearch, currentPage);\n    renderArticles(data.hits);\n    checkBtnStstus(); \n    hideLoader();\n//=========\n    const tryGallery = document.querySelector('.gallery li');\n    const rect = tryGallery.getBoundingClientRect().height;\n    window.scrollBy({\n        top: rect,\n        left: rect,\n        behavior : \"smooth\",\n    });\n    gallery.refresh();\n}\n\nfunction checkBtnStstus() {\n    if (currentPage >= maxPage) {\n        iziToast.error({\n                maxWidth: '432px',\n                height: '48px',\n                color: 'aquamarine',\n                position: 'topRight',\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        hideLoadMore();\n    } else {\n        showLoadMore();\n    }\n}\n\n//*=============================\nfunction showLoader() {\n    loader.classList.remove(\"hidden\");\n};\n\nfunction hideLoader() {\n    loader.classList.add(\"hidden\");\n}\n\n\nfunction showLoadMore() {\n    load.classList.remove('hidden');\n};\n\nfunction hideLoadMore() {\n    load.classList.add('hidden');\n}\n\n"],"names":["symbolTemplate","objects","object","getPhoto","userSearch","currentPage","url","params","axios","form","imgGallery","load","loader","maxPage","perPage","gallery","SimpleLightbox","e","onLoadMoreClick","showLoader","iziToast","hideLoader","hideLoadMore","data","renderArticles","checkBtnStstus","arr","markup","rect","showLoadMore"],"mappings":"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"}